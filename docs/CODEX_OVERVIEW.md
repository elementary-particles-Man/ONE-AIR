ONE-AIR：CODEX用オーバービュー資料

（CODEX_OVERVIEW.md / エージェント参照用）

1. ONE-AIR は何か（概要）

ONE-AIR は、日本の空港における一次トリアージ支援システムです。
目的は 空路経由の大量流入リスクを短期的に抑制するための、簡易トリアージ記録・補助ツールの提供です。

法律変更不要

既存の入管手続きを置き換えない

あくまで「記録支援・判断支援」

国籍差別を行わず、行動と書類整合性だけを扱う

短期で導入できる超軽量ソフトウェア

インストール不要・USB起動前提

オフライン運用可能（LAN・外部通信不要）

最終判断は人間が行い、ONE-AIR はその“補助”である。

これが本質。

2. ONE-AIR の作る“価値”
(1) 空港現場の即応性を上げる

入国審査官の情報確認を高速化

書類の撮影・保存を標準化

判断理由のログ化による後からの監査性確保

(2) 大量流入フェーズを“記録ミスなく短期間で耐える”

スクリーニングの偏りを防止

二次審査対象を一定のルールで抽出

運用ルールを現場へ即時反映（CSV更新のみ）

(3) CLEAR本体とは独立した単機能システム

ISE 不採用（短期用途のため）

AES中心のローカル暗号化のみ

USB内完結（64〜128GBで十分）

3. ONE-AIR の必須要件（CODEXが理解すべき点）
(A) 物理運用

Windows PC に USB を挿すだけ

インストール禁止

USB内バイナリからの起動

ローカルホスト 127.0.0.1:8080 でUIを開く

スマホ・タブレットは同一LANで http://<PC-IP>:8080 にアクセス可能

(B) 技術要件

Go で単体バイナリ生成

内蔵HTTPサーバで HTML/JS を配信

DB：SQLite（ファイル1個）

ログ：JSON or Line-based Text

認証：電話番号＋PIN（CSV）

(C) MRZ取得の方式は OR

NFC

OCR

パスポートリーダ（キーボードエミュレーション）

手入力
→ 最終的に MRZ文字列が得られれば良い

(D) UIは簡素

デザインは最低限

機能優先（フォーム＋決定ボタン）

PWA化不要

4. システム構造（CODEXが作業を誤らないための“脳内モデル”）
ONE-AIR (USB内)
 ├ backend/
 │   ├ main.go        ← Goサーバ本体
 │   ├ api/           ← 将来追加（CRUD）
 │   └ db/airgate.db  ← SQLite
 ├ frontend/
 │   └ index.html     ← 最小UI
 ├ docs/
 │   ├ REQ_SPEC.md
 │   └ CODEX_OVERVIEW.md ←（本書）
 └ deploy/
     └ oneair_launcher.bat ← Windows用ランチャー

CODEX の作業原則

main.go を壊さない

ディレクトリ構造を保つ

/docs にある仕様を常に参照

新しいモジュールは 最小ファイルで追加

依存ライブラリを増やさない

PWAやReactなど 重量級を勝手に導入しない

5. ONE-AIR の基本ワークフロー
一次トリアージ

旅客の MRZ 取得

渡航目的・滞在予定などを入力

ルールに基づき LOW / MED / HIGH を表示

審査官が

通常ライン

二次審査

一時保留
を選択

ログ記録（誰が・何を・なぜ）

二次審査

追加情報（写真・文章・メモ）

最終判断を記録

6. CODEX が理解すべき「やってはいけないこと」

CLEAR/ISE の高度暗号を勝手に合流させない

UIを凝りすぎない（短期用途）

外部通信を前提にしない

スマホアプリ化を提案しない（ブラウザで十分）

Docker/Kubernetes/S3 などクラウド構成を勝手に入れない

複雑なRBAC・OAuth など入れない（CSV認証のみ）

7. 最終目的（CODEXに伝える“ゴール定義”）

USBに入れて刺すだけで、
“空港で今日から使える一次トリアージシステム”
が動く状態にすること。

初期化手順：USBにコピーして .exe 起動

運用手順：CSVで職員更新

導入1時間

学習10分

監査ログは自動蓄積

事故なく、安全安心に審査を補助する

これがONE-AIRの終点。
